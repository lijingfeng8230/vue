<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="underscore-min.js"></script>
    <style>
        body{
            margin:150px;
        }
        #canvas{
            box-shadow: 0 0
            }
      
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
 
    <script>
        /*
        *获取当前画布
        */
     
     const canvas=document.getElementById('canvas');
     const ctx=canvas.getContext('2d');    //2d
     canvas.height=600;                  //画布高度
     canvas.width=1000;                  //画布的宽
     canvas.style.backgroundColor="#000";     //背景是黑色

     //小球类
     class Ball{
         constructor(x,y,color){     
              this.x=x;             //水平位置
              this.y=y;            //垂直位置
              this.color=color;    //颜色
              this.r=40;        //半径
         }
         //绘制小球
         render()           //渲染
         {
            ctx.save();            //调用save函数（保存当前的绘制状态）
            ctx.beginPath();        //beginPath()是重新开始新路径，而把之前的路径都清空掉
            ctx.arc(this.x,this.y,this.r,0,Math.PI*2);   //创建弧/曲线（用于创建圆形或部分圆）   
                    //(圆的中心的 x 坐标,圆的中心的 y 坐标。圆的半径,起始角，以弧度计（弧的圆形的三点钟位置是 0 度）,结束角，以弧度计。s)
            ctx.fillStyle=this.color;          //设置或返回用于填充绘画的颜色、渐变或模式。
            ctx.fill();                //填充当前绘图（路径）。
            ctx.restore();   //调用restore函数，移除自上一次调用save方法以来所添加的任何效果，也就是撤销之前的变化
         }
     }

     //会移动的小球类   //继承
     class MoveBall extends Ball{
              constructor(x,y,color)
              {
                  super(x,y,color);//调用父类

                  //量的变化
                  this.dX=_.random(-5,5); //水平位置-5或者+5
                  this.dY=_.random(-5,5);   
                  this.dR=_.random(1,3);
              }
              upDate()
              {
                  this.x+=this.dX;   //确定了方向位置保持上升或下降
                  this.y+=this.dY;    
                  this.r-=this.dR;      //半径越来越少
                  if(this.r<0)             
                  {
                      this.r=0;
                  }
              }
     }



    //实例化小球
    let ballArr=[];   
    let colorArr=['red','green','blue','yellow','orange','purple','pink'];   //存储颜色
     
     //监听鼠标移动

     canvas.addEventListener('mousemove',   //监听画布里的鼠标移动事件
     function(e){
        // let e=e || event;
        ballArr.push(new MoveBall(e.offsetX,e.offsetY,colorArr[_.random(0,colorArr.length-1)]));   //在ballArr这个数组加入当前的位置并取一个随机的颜色;
        
        //let ball=new MoveBall(e.offsetX,e.offsetY,colorArr[Math.random(0,colorArr.length-1)]); 
     });


//开启定时器

setInterval(function(){
    //清屏
    //清除开始的x y坐标，要清除的宽度和高度
    ctx.clearRect(0,0,canvas.width,canvas.height);
    //绘制
    for(let i=0;i<ballArr.length;i++){
            ballArr[i].render();  //渲染开始
            ballArr[i].upDate();
    }
},50);



  /*   
     var ball=new Ball(50,50,"red");
     ball.render(); */
   </script>
</body>
</html>